# Product Requirements

>### 1. Business Context & Goals (Бизнес-контекст)

**Problem Statement:** Сотрудники тратят в среднем 2 часа в день на поиск информации в корпоративной базе знаний (10,000+ PDF документов). Поиск по ключевым словами неэффективен.

**Business Goal:** Создать API-сервис, который позволит находить точные ответы за <15 секунд, сократив время поиска информации на 70%.

**Target Audience:** Разработчики внутренних порталов (потребители API), сотрудники тех. поддержки (конечные пользователи).

>### 2. User Stories (Пользовательские сценарии)

**US-1:** Как администратор, я хочу загрузить PDF-документ через API, чтобы он стал доступен для поиска.

**US-2:** Как пользователь, я хочу задать вопрос на естественном языке и получить ответ с ссылкой на исходный документ (цитату).

**US-3:** Как пользователь, я хочу видеть историю своих запросов.

>### 3. Functional Requirements (Функциональные требования)

**FR-1 Ingestion:** Система должна принимать файлы .pdf, .docx, .txt.

**FR-2 Chunking:** Текст должен разбиваться на чанки (фрагменты) размером 512 токенов с перекрытием (overlap) 10%.

**FR-3 Vectorization:** Все чанки должны быть векторизованы моделью (например, all-MiniLM-L6-v2) и сохранены в Qdrant.

**FR-4 Retrieval:** При запросе система должна находить топ-3 релевантных куска текста.

**FR-5 Generation:** LLM должна генерировать ответ строго на основе найденного контекста. Если контекста нет — отвечать "Я не знаю".

>### 4. Non-Functional Requirements (Нефункциональные требования / NFRs)

**NFR-1 Latency (Задержка):**

Поиск контекста (Vector Search): < 500ms (99th percentile).

Генерация ответа (LLM): Начало ответа (TTFT - Time To First Token) < 1.5 сек.

**NFR-2 Scalability (Масштабируемость):**

Система должна поддерживать горизонтальное масштабирование Worker-нод (Python) независимо от API Gateway.

**NFR-3 Reliability (Надежность):**

При падении внешнего LLM API система должна возвращать понятную ошибку, а не падать с 500.

**NFR-4 Observability (Наблюдаемость):**

Все запросы должны логироваться. Метрики (RPS, Latency, Error Rate) должны отправляться в Prometheus.

>### 5. Constraints (Ограничения)

**Tech Stack:** Python 3.11+, Go 1.21+.

**Infrastructure:** Docker Compose (для локального запуска).

**Budget:** Использование дешевых API (Gemini или XAI).
